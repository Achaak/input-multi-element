!function(e){e.fn.listElement=function(t){var n=t.nbMaxElem;e(this).html("<textarea class='fw-textarea'></textarea>");var i=e(".fw-textarea",this),a=e(this);function l(t){e(t).remove(),e(".fw-elem",a).length<n&&e(i).show(),o()}function f(){""!=e(i).val()&&(e("<div class='fw-elem'><div><span class='text'>"+e(i).val()+"</span><span class='delete'></span></div></div>").insertBefore(i),e(i).val(""),e(".delete",a).click(function(t){l(e(this).parent().parent())})),e(".fw-elem",a).length>=n&&e(i).hide(),o()}function o(){e(a).outerWidth();for(var t=0,n=0;n<e(".fw-elem",a).length;n++){var l=e(".fw-elem:nth-child("+(n+1)+")",a).outerWidth();e(a).width()<t+l&&(t=0),e(a).width()-t<30&&(t=0),l<e(a).width()?t+=l:t=0}e(i).outerWidth(e(a).width()-t)}o(),e(i).focusout(function(e){f()}),e(i).keydown(function(t){13==t.keyCode?(t.preventDefault(),f()):8==t.keyCode&&""==e(i).val()&&l(e(".fw-elem:nth-last-child(2)",a)),o()}),e(a).click(function(t){e(i).focus()}),e(window).resize(function(){o()})}}(jQuery);